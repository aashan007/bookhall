let express,readdirSync,cors,mongoose;_109‍.w("express",[["default",["express"],function(v){express=v}]]);_109‍.w("fs",[["readdirSync",["readdirSync"],function(v){readdirSync=v}]]);_109‍.w("cors",[["default",["cors"],function(v){cors=v}]]);_109‍.w("mongoose",[["default",["mongoose"],function(v){mongoose=v}]]);



require('dotenv').config();
const morgan = require("morgan")


const app = express();

//db connection
mongoose.connect(process.env.DATABASE,{
    useNewUrlParser:true,
    useFindAndModify: false,
    useUnifiedTopology:true,
    useCreateIndex:true
})
.then(()=> console.log('DB Connected'))
.catch(()=> console.log('DB connection failed'))

//middleware
app.use(cors());
app.use(morgan('dev'));
app.use(express.json());

// route middleware

readdirSync('./routes').map((r)=>
    app.use("/api",require(`./routes/${r}`))
    )


const port = process.env.PORT || 8000;
app.listen(port, ()=> console.log(`Server is running on 8000`))